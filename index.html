<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Práctica — Diseñador programador</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background: #f7f9fc; padding: 24px; }
    .table-fixed { max-width:900px; margin:auto; background:#fff; padding:18px; border-radius:8px; box-shadow:0 6px 18px rgba(0,0,0,0.06);}
    .cell-input { width:100%; text-align:right; padding:6px 8px; border-radius:4px; border:1px solid #dfe6ef; background:#eef6ff; }
    .readonly-cell { background:#0b5ed7; color:white; font-weight:600; text-align:right; padding:6px 8px; border-radius:4px; }
    .tot-row { font-weight:700; background:#f1f6fb; }
    .correct { border:2px solid #28a745 !important; background:#e9f7ee !important; }
    .wrong { border:2px solid #dc3545 !important; background:#fff0f0 !important; }
    .hint { font-size:0.9rem; color:#6c757d; }
    .result-box { margin-top:14px; }
    .small-note { font-size:0.9rem; color:#495057; }
  </style>
</head>
<body>
  <div class="table-fixed">
    <h4 class="mb-3">Práctica — Diseñador programador</h4>
    <p class="small-note">Llena los campos de CARGO y ABONO según corresponda. Da clic en "Revisar" para verificar tus respuestas. Usa "Calcular (auto)" para actualizar los totales. "Restablecer" limpia todos los campos. "Mostrar solución" llena los campos con la respuesta correcta.</p>
    <table class="table table-bordered align-middle">
      <thead>
        <tr class="table-light">
          <th style="width:48%">CONCEPTO</th>
          <th style="width:26%">CARGO</th>
          <th style="width:26%">ABONO</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Bancos</td>
          <td><input id="cargo1" class="cell-input" value="" /></td>
          <td><input id="abono1" class="cell-input" value="" /></td>
        </tr>
        <tr>
          <td>Pago proveedor Inmobiliaria SA</td>
          <td><input id="cargo2" class="cell-input" value="" /></td>
          <td><input id="abono2" class="cell-input" value="" /></td>
        </tr>
        <tr>
          <td>Cobro cheque por máquina envasadora</td>
          <td><input id="cargo3" class="cell-input" value="" /></td>
          <td><input id="abono3" class="cell-input" value="" /></td>
        </tr>
        <tr>
          <td>Pago de Zaza SA</td>
          <td><input id="cargo4" class="cell-input" value="" /></td>
          <td><input id="abono4" class="cell-input" value="" /></td>
        </tr>
        <tr>
          <td>Viáticos a Monterrey</td>
          <td><input id="cargo5" class="cell-input" value="" /></td>
          <td><input id="abono5" class="cell-input" value="" /></td>
        </tr>

        <tr class="tot-row">
          <td>TOTALES</td>
          <td><div id="totalCargo" class="readonly-cell">0</div></td>
          <td><div id="totalAbono" class="readonly-cell">0</div></td>
        </tr>
        <tr class="tot-row">
          <td>SALDO FINAL</td>
          <td colspan="2"><div id="saldoFinal" class="readonly-cell">0</div></td>
        </tr>
      </tbody>
    </table>

    <div class="d-flex gap-2 mb-2">
      <button id="revisarBtn" class="btn btn-primary">Revisar</button>
      <button id="calcularBtn" class="btn btn-outline-secondary">Calcular (auto)</button>
      <button id="resetBtn" class="btn btn-outline-danger">Restablecer</button>
      <button id="demoBtn" class="btn btn-success">Mostrar solución</button>
    </div>

    <div id="result" class="result-box"></div>
  </div>

<script>
const expected = {
  cargo1: 850000,
  abono2: 17700,
  cargo3: 120000,
  abono4: 25000,
  abono5: 70000
};

const fields = ['cargo1','abono2','cargo3','abono4','abono5'];

function parseNumber(str){
  if (str === null || str === undefined) return 0;
  const s = String(str).replace(/[^0-9.-]/g, '');
  const n = parseFloat(s);
  return isNaN(n) ? 0 : n;
}

function formatMoney(n){
  return n.toLocaleString('es-MX', {maximumFractionDigits: 0});
}

function calcularTotales(){
  const cargoIds = ['cargo1','cargo2','cargo3','cargo4','cargo5'];
  const abonoIds = ['abono1','abono2','abono3','abono4','abono5'];

  let totalCargo = 0, totalAbono = 0;
  cargoIds.forEach(id => {
    const el = document.getElementById(id);
    if (!el) return;
    totalCargo += parseNumber(el.value);
  });
  abonoIds.forEach(id => {
    const el = document.getElementById(id);
    if (!el) return;
    totalAbono += parseNumber(el.value);
  });

  const saldo = totalCargo - totalAbono;
  document.getElementById('totalCargo').textContent = formatMoney(totalCargo);
  document.getElementById('totalAbono').textContent = formatMoney(totalAbono);
  document.getElementById('saldoFinal').textContent = formatMoney(saldo);
  return { totalCargo, totalAbono, saldo };
}

function revisar(){
  const totals = calcularTotales();

  let aciertos = 0;
  fields.forEach(id => {
    const el = document.getElementById(id);
    el.classList.remove('correct','wrong');
    const existing = document.getElementById(id + '-hint');
    if (existing) existing.remove();
  });

  fields.forEach(id => {
    const el = document.getElementById(id);
    const val = parseNumber(el.value);
    const expect = expected[id] || 0;
    if (val === expect) {
      aciertos++;
      el.classList.add('correct');
    } else {
      el.classList.add('wrong');
      const hint = document.createElement('div');
      hint.id = id + '-hint';
      hint.style.fontSize = '0.9rem';
      hint.style.color = '#6c757d';
      hint.textContent = `Valor correcto: ${formatMoney(expect)}`;
      el.parentNode.appendChild(hint);
    }
  });

  const resultBox = document.getElementById('result');
  resultBox.innerHTML = `
    <div class="alert alert-info p-2">
      <strong>Aciertos:</strong> ${aciertos} / ${fields.length} &nbsp;•&nbsp;
      <strong>Total Cargo:</strong> ${formatMoney(totals.totalCargo)} &nbsp;•&nbsp;
      <strong>Total Abono:</strong> ${formatMoney(totals.totalAbono)} &nbsp;•&nbsp;
      <strong>Saldo final:</strong> ${formatMoney(totals.saldo)}
    </div>
  `;
}

function resetAll(){
  const allIds = ['cargo1','abono1','cargo2','abono2','cargo3','abono3','cargo4','abono4','cargo5','abono5'];
  allIds.forEach(id => {
    const el = document.getElementById(id);
    if (el) el.value = '';
  });
  fields.forEach(id => {
    const el = document.getElementById(id);
    el.classList.remove('correct','wrong');
    const hint = document.getElementById(id + '-hint'); if (hint) hint.remove();
  });
  document.getElementById('result').innerHTML = '';
  calcularTotales();
}

function showSolution(){
  const mapping = {
    cargo1: expected.cargo1,
    abono2: expected.abono2,
    cargo3: expected.cargo3,
    abono4: expected.abono4,
    abono5: expected.abono5
  };
  resetAll();
  Object.keys(mapping).forEach(id => {
    const el = document.getElementById(id);
    if (el) el.value = mapping[id];
  });
  calcularTotales();
}

document.querySelectorAll('.cell-input').forEach(inp => {
  inp.addEventListener('input', () => calcularTotales());
});
document.getElementById('revisarBtn').addEventListener('click', revisar);
document.getElementById('calcularBtn').addEventListener('click', calcularTotales);
document.getElementById('resetBtn').addEventListener('click', resetAll);
document.getElementById('demoBtn').addEventListener('click', showSolution);

resetAll();
</script>
</body>
</html>
